# natupnp
又一个 tcp 打洞工具，参考了 [Natter](https://github.com/MikeWang000000/Natter) 和 [natmap](https://github.com/heiher/natmap)

和以上两个工具相同，需要 nat1 也就是 Full cone NAT 才可成功打洞。不过不同的是，这个工具集成了 upnp 的功能。

对于只有一级路由的情况，也就是通常的 路由器 --> 设备 的情况下，能在路由上设置端口映射，增加打洞的成功率。

如果是光猫拨号且路由器不为桥接的情况，可以尝试在光猫上设置路由器为 DMZ 主机。

## 使用示例
首先可以检测当前网络是否支持打洞。

`natupnp -t` 将会在 8086 上监听，然后打印公网地址和端口，可以尝试使用其他网络用浏览器访问，如果显示 ok 则说明打洞成功。

## 命令
和 natmap 一样，支持绑定和转发两种模式。绑定模式在 linux 上似乎有一些问题，建议用转发。


### 绑定
`natupnp -p 8080`

当前设备需在防火墙开放 8080 端口

### 转发
`natupnp -p 8080 -d 127.0.0.1:80`

会将数据转发到 127.0.0.1:80，也需要在防火墙开放 8080 端口
